<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Idle Clicker Deluxe</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css?v=9">
</head>

<body class="bg-1">

<div class="game">

<h1>âš¡ Idle Clicker Deluxe</h1>

<div class="stats">
  <div>Clicks<br><span id="clicks">0</span></div>
  <div>Per Click<br><span id="perClick">1</span></div>
  <div>Auto/sec<br><span id="autoClick">0</span></div>
</div>

<div class="info">
  ğŸŒ World: <span id="worldName"></span><br>
  âœ– Multiplier: <span id="multi"></span><br>
  ğŸ” Rebirths: <span id="rebirths"></span><br>
  â­ Prestige: <span id="prestige">0</span>
</div>

<button id="clickBtn">CLICK</button>

<h2>Upgrades</h2>
<button onclick="buyClick()">+1 Click (Cost <span id="clickCost"></span>)</button>
<button onclick="buyAuto()">+1 Auto (Cost <span id="autoCost"></span>)</button>
<button onclick="buyWorld()" id="worldBtn">Unlock World (Cost <span id="worldCost"></span>)</button>

<h2>Progression</h2>
<button onclick="rebirth()">Rebirth (1,000,000)</button>
<button onclick="prestige()">Prestige (100,000,000)</button>

<h2>Casino</h2>
<button onclick="openCasino()">ğŸ° Open BetRoom</button>

</div>

<!-- CASINO MODAL -->
<div id="casino" class="modal">
  <div class="casino-box">
    <h2>ğŸ° Roulette</h2>

    <canvas id="wheel" width="260" height="260"></canvas>

    <input id="bet" type="number" placeholder="Bet amount">
    <div class="casino-buttons">
      <button class="red" onclick="spin('red')">RED</button>
      <button class="black" onclick="spin('black')">BLACK</button>
    </div>

    <div id="casinoResult"></div>
    <button onclick="closeCasino()">Close</button>
  </div>
</div>

<script>
/* ================= SAVE ================= */
const SAVE = "idle_clicker_v3";
const DEFAULT = {
  clicks:0, perClick:1, autoClick:0,
  clickCost:10, autoCost:50,
  world:1, worldCost:1000,
  rebirths:0, prestige:0,
  lastTime: Date.now()
};

let d = {...DEFAULT, ...JSON.parse(localStorage.getItem(SAVE) || "{}")};

/* ================= WORLDS ================= */
const worlds = ["Spark Realm","Neon Void","Aqua Nexus","Inferno Core"];
const g = id => document.getElementById(id);

/* ================= MULTI ================= */
function multi(){
  return (2 ** (d.world-1)) * (2 ** d.rebirths) * (1 + d.prestige);
}

/* ================= UI ================= */
function updateUI(){
  g("clicks").textContent = Math.floor(d.clicks);
  g("perClick").textContent = d.perClick;
  g("autoClick").textContent = d.autoClick;
  g("clickCost").textContent = d.clickCost;
  g("autoCost").textContent = d.autoCost;
  g("worldCost").textContent = d.worldCost;
  g("rebirths").textContent = d.rebirths;
  g("prestige").textContent = d.prestige;
  g("worldName").textContent = worlds[d.world-1];
  g("multi").textContent = "x" + multi();

  document.body.className = "bg-" + d.world;

  if(d.world>=4){
    g("worldBtn").textContent="MAX WORLD";
    g("worldBtn").disabled=true;
  }

  localStorage.setItem(SAVE, JSON.stringify(d));
}

/* ================= OFFLINE EARN ================= */
(function offline(){
  const now = Date.now();
  const diff = Math.floor((now - d.lastTime)/1000);
  d.clicks += diff * d.autoClick * multi();
  d.lastTime = now;
})();

/* ================= CLICK ================= */
const clickSound = new Audio("sounds/click.mp3");
g("clickBtn").onclick = ()=>{
  d.clicks += d.perClick * multi();
  clickSound.play();
  updateUI();
};

/* ================= UPGRADES ================= */
function buyClick(){
  if(d.clicks>=d.clickCost){
    d.clicks-=d.clickCost;
    d.perClick++;
    d.clickCost=Math.floor(d.clickCost*1.4);
    updateUI();
  }
}
function buyAuto(){
  if(d.clicks>=d.autoCost){
    d.clicks-=d.autoCost;
    d.autoClick++;
    d.autoCost=Math.floor(d.autoCost*1.6);
    updateUI();
  }
}
function buyWorld(){
  if(d.world<4 && d.clicks>=d.worldCost){
    d.clicks-=d.worldCost;
    d.world++;
    d.worldCost*=5;
    updateUI();
  }
}

/* ================= REBIRTH / PRESTIGE ================= */
function rebirth(){
  if(d.clicks>=1e6){
    d = {...DEFAULT, rebirths:d.rebirths+1, prestige:d.prestige};
    updateUI();
  }
}
function prestige(){
  if(d.clicks>=1e8){
    d = {...DEFAULT, prestige:d.prestige+1};
    updateUI();
  }
}

/* ================= CASINO ================= */
const casino = g("casino");
const wheel = g("wheel").getContext("2d");
let spinning=false;

function openCasino(){ casino.style.display="flex"; drawWheel(0); }
function closeCasino(){ casino.style.display="none"; }

function drawWheel(rot){
  wheel.clearRect(0,0,260,260);
  wheel.save();
  wheel.translate(130,130);
  wheel.rotate(rot);
  wheel.fillStyle="red";
  wheel.beginPath();
  wheel.arc(0,0,120,0,Math.PI);
  wheel.fill();
  wheel.fillStyle="black";
  wheel.beginPath();
  wheel.arc(0,0,120,Math.PI,Math.PI*2);
  wheel.fill();
  wheel.restore();
}

function spin(choice){
  if(spinning) return;
  const bet=Number(g("bet").value);
  if(!bet||bet>d.clicks) return;

  spinning=true;
  const win=Math.random()<0.5?"red":"black";
  let rot=0;
  const spinSound=new Audio("sounds/spin.mp3");
  spinSound.play();

  const anim=setInterval(()=>{
    rot+=0.3;
    drawWheel(rot);
  },16);

  setTimeout(()=>{
    clearInterval(anim);
    if(choice===win){
      d.clicks+=bet;
      new Audio("sounds/win.mp3").play();
      g("casinoResult").textContent="YOU WON!";
    }else{
      d.clicks-=bet;
      new Audio("sounds/lose.mp3").play();
      g("casinoResult").textContent="YOU LOST!";
    }
    spinning=false;
    updateUI();
  },2000);
}

/* ================= AUTO ================= */
setInterval(()=>{
  d.clicks += d.autoClick * multi();
  updateUI();
},1000);

updateUI();
</script>
</body>
</html>
