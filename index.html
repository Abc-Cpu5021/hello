<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Purple Clicker</title>

<link rel="stylesheet" href="style.css?v=FINAL2">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
</head>
<body>

<div class="game">
    <h1>âš¡ Purple Clicker</h1>

    <div class="stats">
        <div>Clicks<br><span id="clicks">0</span></div>
        <div>Per Click<br><span id="perClick">1</span></div>
        <div>Auto/sec<br><span id="autoClick">0</span></div>
    </div>

    <div class="currency">
        ğŸ’ Gems: <span id="gems">0</span><br>
        ğŸŒ World: <span id="world">1</span>
    </div>

    <button id="clickBtn">CLICK</button>

    <h2>Upgrades</h2>

    <div class="upgrades">
        <button id="clickUpgrade">
            +1 Click Power<br>
            Cost: <span id="clickCost">10</span>
        </button>

        <button id="autoUpgrade">
            Auto Clicker (+1/sec)<br>
            Cost: <span id="autoCost">50</span>
        </button>

        <button id="gemUpgrade">
            Convert 100 Clicks â†’ 1 Gem
        </button>
    </div>

    <h2>World</h2>

    <button id="worldUpgrade">
        Unlock New World<br>
        Cost: <span id="worldCost">10</span> ğŸ’
    </button>

    <button id="soundBtn">ğŸ”Š Sound ON</button>
</div>

<audio id="clickSound" preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-game-click-1114.mp3">
</audio>
<audio id="buySound" preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-game-upgrade-2062.mp3">
</audio>

<script>
let data = {
    clicks: 0,
    perClick: 1,
    autoClick: 0,
    clickCost: 10,
    autoCost: 50,
    gems: 0,
    world: 1,
    worldCost: 10,
    sound: true
};

// LOAD SAVE
try {
    const save = JSON.parse(localStorage.getItem("purpleClickerSave"));
    if (save) Object.assign(data, save);
} catch {}

const el = id => document.getElementById(id);

function saveGame() {
    localStorage.setItem("purpleClickerSave", JSON.stringify(data));
}

function updateUI() {
    el("clicks").textContent = Math.floor(data.clicks);
    el("perClick").textContent = data.perClick;
    el("autoClick").textContent = data.autoClick;
    el("clickCost").textContent = data.clickCost;
    el("autoCost").textContent = data.autoCost;
    el("gems").textContent = data.gems;
    el("world").textContent = data.world;
    el("worldCost").textContent = data.worldCost;
    el("soundBtn").textContent = data.sound ? "ğŸ”Š Sound ON" : "ğŸ”‡ Sound OFF";
    saveGame();
}

function play(sound) {
    if (!data.sound) return;
    sound.cloneNode().play().catch(()=>{});
}

el("clickBtn").onclick = () => {
    data.clicks += data.perClick * data.world;
    play(clickSound);
    animateClick(`+${data.perClick * data.world}`);
    updateUI();
};

el("clickUpgrade").onclick = () => {
    if (data.clicks >= data.clickCost) {
        data.clicks -= data.clickCost;
        data.perClick++;
        data.clickCost = Math.floor(data.clickCost * 1.6);
        play(buySound);
        updateUI();
    }
};

el("autoUpgrade").onclick = () => {
    if (data.clicks >= data.autoCost) {
        data.clicks -= data.autoCost;
        data.autoClick++;
        data.autoCost = Math.floor(data.autoCost * 2);
        play(buySound);
        updateUI();
    }
};

el("gemUpgrade").onclick = () => {
    if (data.clicks >= 100) {
        data.clicks -= 100;
        data.gems++;
        play(buySound);
        updateUI();
    }
};

el("worldUpgrade").onclick = () => {
    if (data.gems >= data.worldCost) {
        data.gems -= data.worldCost;
        data.world++;
        data.worldCost = Math.floor(data.worldCost * 2);
        play(buySound);
        updateUI();
    }
};

el("soundBtn").onclick = () => {
    data.sound = !data.sound;
    updateUI();
};

setInterval(() => {
    data.clicks += data.autoClick * data.world;
    updateUI();
}, 1000);

function animateClick(text) {
    const f = document.createElement("div");
    f.className = "float";
    f.textContent = text;
    document.body.appendChild(f);
    const r = el("clickBtn").getBoundingClientRect();
    f.style.left = r.left + r.width / 2 + "px";
    f.style.top = r.top + "px";
    setTimeout(() => f.remove(), 800);
}

updateUI();
</script>
</body>
</html>
